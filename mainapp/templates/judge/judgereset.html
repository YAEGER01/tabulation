{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" type="text/css" href="{% static 'admin/cssdesign/design.css' %}"/>
    <link rel="icon" type="image/png" href="{% static 'admin/images/logo.png' %}"/>
    <title>ISU Scoring</title>
    <style type="text/css">
        table { border-collapse:collapse; }
        td { padding:15px; }
        table, td, th { border:1px solid green; }
        th {
            background: linear-gradient(to bottom, #FFFFFF 3%, #D1D1D1 90%);
            color:black;
        }
        a:link, a:visited, a:hover, a:active {
            text-decoration: none;
            font-weight: normal;
            background-color: none;
        }
        a:link { color: blue; }
        a:visited, a:hover, a:active { color: #000; }
        .CSSButton {
            border: 1px solid #D1D1D1;
            background: linear-gradient(to bottom, #FFFFFF 3%, #D1D1D1 90%);
            background-color: #FFFFFF;
            box-shadow: inset 0px 0px 3px -1px #FFFFFF;
            border-radius: 8px;
            text-shadow: 0px 1px 1px #FFFFFF;
            font-weight:normal;
            margin: 1px 5px;
            padding: 6px 0px;
            color: #000000;
            letter-spacing: 1px;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 12px;
            width: 112px;
            text-transform: capitalize;
            text-align: center;
            text-decoration: none;
            cursor: pointer;
            display: inline-block;
        }
        .CSSButton:hover {
            background: linear-gradient(to bottom, #D1D1D1 3%, #FFFFFF 90%);
            background-color: #D1D1D1;
        }
        .CSSButton:active {
            position: relative;
            top: 1px;
            left: 0px;
        }
    </style>
</head>
<body bgcolor="#FFFFff">
<p style="font-family: serif,arial; font-size:x-large; font-weight: bold; color: red;" align="center">{{ event.evdes }}</p>
{% for category_block in table_data %}
    <table style="width: 90%;" align="center">
        <tr>
            <th style="width: 1%;">No.</th>
            <th style="width: 10%;">Name</th>
            {% for cri in criteria %}
                <th style="width: 5%;">{{ cri.ctitle }}<br/>{{ cri.cper }}%</th>
            {% endfor %}
            <th style="width: 2%;">Total <br/>{{ criteria|map:'cper'|sum }}%</th>
        </tr>
        {% for candidate in category_block.candidates %}
        <tr>
            <td style="width: 1%; font-family: serif,arial; font-size: 16px; font-weight: bold;">{{ candidate.cano }}</td>
            <td style="width: 10%;font-family: serif,arial; font-size: 16px; font-weight: bold;">{{ candidate.cname }}</td>
            {% for score in candidate.scores %}
                <td style="width: 5%;" align="center">
                    {{ score.inscore }}
                    <input type="checkbox" value="{{ score.rvalchk }}" onclick="savescore(this, '{{ candidate.id }}', '{{ score.crid }}', '{{ event.id }}', '{{ judge.id }}', '{{ score.criper }}')" {% if score.rchk %}checked{% endif %}/>{{ score.rnamchk }}
                </td>
            {% endfor %}
            <td style="width: 1%; font-family: serif,arial; font-size: 16px; font-weight: bold;" align="center">{{ candidate.total|floatformat:2 }}</td>
        </tr>
        {% endfor %}
    </table>
{% endfor %}
<script type="text/javascript">
function savescore(vchk,canid,crid,evid,jid,criper) {
    var getscore = vchk.value;
    var msgscore;
    if(getscore == 1){
        getscore = "y";
        msgscore = "locked";
    } else {
        getscore = "";
        msgscore = "locked";
    }
    var xml = new XMLHttpRequest();
    xml.onreadystatechange = function() {
        if(xml.readyState == 4) {
           
        }
    }
    xml.open("GET", "{% url 'judge_reset_score' %}?mycontrol=judgereset&myinscore=" + getscore + "&mycanid=" + canid + "&mycrid=" + crid + "&myevid=" + evid + "&myjid=" + jid + "&criper=" + criper, true);
    xml.send(null);
}
</script>
</body>
</html>
